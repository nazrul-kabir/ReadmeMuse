# ReadmeMuse ğŸ“

[![CI](https://github.com/nazrul-kabir/ReadmeMuse/workflows/CI/badge.svg)](https://github.com/nazrul-kabir/ReadmeMuse/actions)
[![License: ISC](https://img.shields.io/badge/License-ISC-blue.svg)](LICENSE)

GitHub-native, Copilot-powered partial doc diff agent â€” a lightweight GitHub App that suggests precise README + key doc updates only in your PRs, preserving your repo's voice and avoiding full-repo scans.

## ğŸš€ Quick Start

**Want to get started in 5 minutes?** â†’ [QUICKSTART.md](QUICKSTART.md)

## Features

- ğŸ¯ **Smart Triggering**: Only analyzes PRs when code changes touch configured watch paths
- ğŸ“‹ **YAML Configuration**: Simple repo-level config to define watchlist and documentation files
- ğŸ¤– **AI-Powered Analysis**: Analyzes PR diffs and suggests relevant documentation updates
- ğŸ’¬ **PR Comments**: Posts suggestions directly as GitHub PR comments with diff patches
- ğŸ” **Non-Invasive**: Preserves your repo's voice and style, only suggests updates where needed

## How It Works

1. **Webhook Trigger**: Listens for PR open/update events on GitHub
2. **Path Matching**: Checks if changed files match your configured watch paths
3. **AI Analysis**: Analyzes PR diff and existing documentation content
4. **Suggestions**: Generates precise diff patches for documentation updates
5. **PR Comment**: Posts suggestions as a formatted comment with expandable diffs

## Setup

> **ğŸ“– Detailed guide**: See [QUICKSTART.md](QUICKSTART.md) for step-by-step setup

### 1. Install as GitHub App

1. Create a new GitHub App in your organization settings
2. Set the following permissions:
   - Repository contents: Read
   - Pull requests: Read & Write
   - Issues: Read & Write (for comments)
3. Subscribe to webhook events:
   - Pull request (opened, synchronize)
4. Install the app on repositories you want to monitor

### 2. Configure Your Repository

Create a `.readmemuse.yml` file in your repository root:

```yaml
# Which files to watch for changes
watchPaths:
  - "src/**/*"
  - "lib/**/*"
  - "api/**/*"

# Which documentation files to update
documentationFiles:
  - "README.md"
  - "docs/**/*.md"
  - "CONTRIBUTING.md"
```

See [.readmemuse.yml.example](.readmemuse.yml.example) for a complete example.

### 3. Deploy the App

#### Local Development

```bash
# Install dependencies
npm install

# Build TypeScript
npm run build

# Set up environment variables (copy .env.example to .env)
cp .env.example .env

# Configure your GitHub App credentials in .env
# - APP_ID
# - PRIVATE_KEY_PATH
# - WEBHOOK_SECRET

# Start the app
npm start
```

#### Production Deployment

Deploy to your preferred hosting platform:
- Heroku
- AWS Lambda
- Google Cloud Run
- Azure Functions
- Any Node.js hosting

## Configuration

### Watch Paths

Define which file patterns trigger documentation analysis:

```yaml
watchPaths:
  - "src/**/*"          # All files in src/
  - "lib/**/*.ts"       # TypeScript files in lib/
  - "api/**/*"          # All files in api/
  - "*.config.js"       # Config files in root
```

### Documentation Files

Specify which documentation files should be analyzed for updates:

```yaml
documentationFiles:
  - "README.md"         # Main readme
  - "docs/**/*.md"      # All markdown in docs/
  - "CONTRIBUTING.md"   # Contributing guide
  - "API.md"            # API documentation
```

## Example Output

When a PR modifies watched files, ReadmeMuse posts a comment like:

```markdown
## ğŸ“ ReadmeMuse: Documentation Update Suggestions

I've analyzed your PR and found potential documentation updates:

### README.md

**Summary:** Update README.md based on PR changes

**Reasoning:** This PR modifies 3 file(s) with 45 addition(s). 
Documentation should be updated to reflect these changes.

ğŸ“‹ View suggested diff (expandable)

---

ğŸ’¡ These suggestions are generated by ReadmeMuse to help keep 
your documentation in sync with code changes.
```

## Architecture

ReadmeMuse follows a clean, event-driven architecture optimized for GitHub App webhooks:

```
src/
â”œâ”€â”€ index.ts                     # Main Probot app entry point
â”œâ”€â”€ handlers/
â”‚   â””â”€â”€ pullRequestHandler.ts   # PR event handler
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ configService.ts         # Config loading
â”‚   â”œâ”€â”€ analysisService.ts       # PR analysis orchestration
â”‚   â””â”€â”€ commentService.ts        # PR comment formatting
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ pathMatcher.ts          # File pattern matching
â”‚   â””â”€â”€ aiAnalyzer.ts           # AI-powered doc analysis
â””â”€â”€ types/
    â”œâ”€â”€ config.ts               # Configuration types
    â””â”€â”€ suggestion.ts           # Suggestion types
```

**ğŸ“ Detailed Architecture Documentation**: See [ARCHITECTURE.md](ARCHITECTURE.md) for comprehensive diagrams including:
- End-to-End Data Flow Diagram
- Process-level DFD (Data Flow Diagrams)
- Sequence Diagrams with timing analysis
- Component interactions and responsibilities

## Development

### Setup

```bash
# Clone repository
git clone https://github.com/nazrul-kabir/ReadmeMuse.git
cd ReadmeMuse

# Install dependencies
npm install

# Build TypeScript
npm run build

# Run tests
npm test
```

### Running Locally

1. Set up environment variables (copy `.env.example` to `.env`)
2. Build the project: `npm run build`
3. Start the app: `npm start`
4. Use [smee.io](https://smee.io) to forward webhooks to localhost

### Testing

```bash
# Run all tests
npm test

# Watch mode
npm run test:watch

# Coverage report
npm run test:coverage
```

## Deployment

See [DEPLOYMENT.md](DEPLOYMENT.md) for detailed deployment instructions covering:
- Heroku
- Docker
- Node.js servers
- Serverless platforms

## Documentation

- [QUICKSTART.md](QUICKSTART.md) - Get started in 5 minutes
- [ARCHITECTURE.md](ARCHITECTURE.md) - System architecture and data flow diagrams
- [DEPLOYMENT.md](DEPLOYMENT.md) - Deployment guide
- [CONTRIBUTING.md](CONTRIBUTING.md) - Contribution guidelines

## License

ISC - See [LICENSE](LICENSE) file for details

## Contributing

Contributions welcome! Please read [CONTRIBUTING.md](CONTRIBUTING.md) before submitting PRs.

## Support

- ğŸ› [Report issues](https://github.com/nazrul-kabir/ReadmeMuse/issues)
- ğŸ’¬ [Start a discussion](https://github.com/nazrul-kabir/ReadmeMuse/discussions)
- â­ Star this repo if you find it useful!

---

Built with â¤ï¸ using [Probot](https://probot.github.io/)