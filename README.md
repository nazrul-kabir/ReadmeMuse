# ReadmeMuse ğŸ“

GitHub-native, Copilot-powered partial doc diff agent â€” a lightweight GitHub App that suggests precise README + key doc updates only in your PRs, preserving your repo's voice and avoiding full-repo scans.

## Features

- ğŸ¯ **Smart Triggering**: Only analyzes PRs when code changes touch configured watch paths
- ğŸ“‹ **YAML Configuration**: Simple repo-level config to define watchlist and documentation files
- ğŸ¤– **AI-Powered Analysis**: Analyzes PR diffs and suggests relevant documentation updates
- ğŸ’¬ **PR Comments**: Posts suggestions directly as GitHub PR comments with diff patches
- ğŸ” **Non-Invasive**: Preserves your repo's voice and style, only suggests updates where needed

## How It Works

1. **Webhook Trigger**: Listens for PR open/update events on GitHub
2. **Path Matching**: Checks if changed files match your configured watch paths
3. **AI Analysis**: Analyzes PR diff and existing documentation content
4. **Suggestions**: Generates precise diff patches for documentation updates
5. **PR Comment**: Posts suggestions as a formatted comment with expandable diffs

## Setup

### 1. Install as GitHub App

1. Create a new GitHub App in your organization settings
2. Set the following permissions:
   - Repository contents: Read
   - Pull requests: Read & Write
   - Issues: Read & Write (for comments)
3. Subscribe to webhook events:
   - Pull request (opened, synchronize)
4. Install the app on repositories you want to monitor

### 2. Configure Your Repository

Create a `.readmemuse.yml` file in your repository root:

```yaml
# Which files to watch for changes
watchPaths:
  - "src/**/*"
  - "lib/**/*"
  - "api/**/*"

# Which documentation files to update
documentationFiles:
  - "README.md"
  - "docs/**/*.md"
  - "CONTRIBUTING.md"
```

See [.readmemuse.yml.example](.readmemuse.yml.example) for a complete example.

### 3. Deploy the App

#### Local Development

```bash
# Install dependencies
npm install

# Build TypeScript
npm run build

# Set up environment variables (copy .env.example to .env)
cp .env.example .env

# Configure your GitHub App credentials in .env
# - APP_ID
# - PRIVATE_KEY_PATH
# - WEBHOOK_SECRET

# Start the app
npm start
```

#### Production Deployment

Deploy to your preferred hosting platform:
- Heroku
- AWS Lambda
- Google Cloud Run
- Azure Functions
- Any Node.js hosting

## Configuration

### Watch Paths

Define which file patterns trigger documentation analysis:

```yaml
watchPaths:
  - "src/**/*"          # All files in src/
  - "lib/**/*.ts"       # TypeScript files in lib/
  - "api/**/*"          # All files in api/
  - "*.config.js"       # Config files in root
```

### Documentation Files

Specify which documentation files should be analyzed for updates:

```yaml
documentationFiles:
  - "README.md"         # Main readme
  - "docs/**/*.md"      # All markdown in docs/
  - "CONTRIBUTING.md"   # Contributing guide
  - "API.md"            # API documentation
```

## Example Output

When a PR modifies watched files, ReadmeMuse posts a comment like:

```markdown
## ğŸ“ ReadmeMuse: Documentation Update Suggestions

I've analyzed your PR and found potential documentation updates:

### README.md

**Summary:** Update README.md based on PR changes

**Reasoning:** This PR modifies 3 file(s) with 45 addition(s). 
Documentation should be updated to reflect these changes.

ğŸ“‹ View suggested diff (expandable)

---

ğŸ’¡ These suggestions are generated by ReadmeMuse to help keep 
your documentation in sync with code changes.
```

## Architecture

```
src/
â”œâ”€â”€ index.ts                 # Main Probot app entry point
â”œâ”€â”€ handlers/
â”‚   â””â”€â”€ pullRequestHandler.ts   # PR event handler
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ configService.ts        # Config loading
â”‚   â”œâ”€â”€ analysisService.ts      # PR analysis orchestration
â”‚   â””â”€â”€ commentService.ts       # PR comment formatting
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ pathMatcher.ts         # File pattern matching
â”‚   â””â”€â”€ aiAnalyzer.ts          # AI-powered doc analysis
â””â”€â”€ types/
    â”œâ”€â”€ config.ts              # Configuration types
    â””â”€â”€ suggestion.ts          # Suggestion types
```

## Development

```bash
# Build TypeScript
npm run build

# Run in development mode
npm run dev

# Run tests
npm test
```

## License

ISC

## Contributing

Contributions welcome! Please open an issue or PR.